getwd()
setwd('C:/R-Projects/webscrapping-imoveis/')
getwd()
clear
install.packages('Pacman')
install.packages('pacman')
clear
pacman::p_load('RSelenium', 'plyr', 'dplyr')
rD <- RSelenium::rsDriver(browser = 'chrome', port = 4545L, chromever = '89.0.4389.90')
rD <- RSelenium::rsDriver(browser = 'chrome', port = 4545L, chromever = '89.0.4389.23')
link_imobiliarias <- c('https://www.vivareal.com.br/aluguel/sp/sao-jose-do-rio-preto/condominio_residencial/#preco-ate=3000&preco-desde=1200&quartos=2&tipos=condominio_residencial,casa_residencial')
remDr <- rD[['cliient']] # Navegador
remDr$navigate(link_imobiliarias)
view(link_imobiliarias)
View(link-imobiliarias)
View(link_imobiliarias)
View(link_imobiliarias[1])
link_imobiliarias
link_imobiliarias[1]
remDr$navigate(link_imobiliarias[1])
remDr$navigate('https://www.vivareal.com.br/aluguel/sp/sao-jose-do-rio-preto/condominio_residencial/#preco-ate=3000&preco-desde=1200&quartos=2&tipos=condominio_residencial,casa_residencial')
remDr <- rD[['client']] # Navegador
remDr$navigate('https://www.vivareal.com.br/aluguel/sp/sao-jose-do-rio-preto/condominio_residencial/#preco-ate=3000&preco-desde=1200&quartos=2&tipos=condominio_residencial,casa_residencial')
remDr$navigate(link_imobiliarias)
remDr$navigate('google')
remDr$navigate('www.google.co')
remDr$navigate('www.google.com')
rD <- RSelenium::rsDriver(browser = 'chrome', port = 4545L, chromever = '89.0.4389.23')
remDr <- rD[['client']] # Navegador
remDr$navigate(link_imobiliarias)
rD <- RSelenium::rsDriver(browser = 'chrome', port = 4545L, chromever = '89.0.4389.23')
?RSelenium::rsDriver()
?RSelenium::rsDriver()$
?RSelenium::rsDriver()
?RSelenium::rsDriver()
remDr$close()
remDr$closeServer()
remDr$closeServer()
rD <- RSelenium::rsDriver(browser = 'chrome', port = 4545L, chromever = '89.0.4389.23')
rD[['server']]$stop()
rD[['server']]$stop()
rD <- RSelenium::rsDriver(browser = 'chrome', port = 4545L, chromever = '89.0.4389.23')
rD[["server"]]$stop()
rS <- rD[["server"]]
rS$stop()
?rS$stop()
?rD[["server"]]$stop()
remDr$close()
pacman::p_load('RSelenium', 'plyr', 'dplyr', 'rvest', 'stringr')
rm(list = ls())
rD <- RSelenium::rsDriver(browser = 'chrome', port = 4545L, chromever = '89.0.4389.23')
remDr <- rD[['client']] # Navegador
first_link <- c('https://www.vivareal.com.br/aluguel/sp/sao-jose-do-rio-preto/condominio_residencial/#ordenar-por=preco:ASC&preco-ate=3000&preco-desde=1200&quartos=2&tipos=condominio_residencial,casa_residencial')
remDr$navigate(first_link)
html <- rvest::read_html(remDr$getPageSource()[[1]])
View(html)
source('C:/R-Projects/webscrapping-imoveis/webscrapping.R', echo=TRUE)
rvest::html_text2(rvest::html_nodes(html, ."js-card-title .js-card-title"))
html %>%
rvest::html_nodes(".js-card-title .js-card-title") %>%
rvest::html_text2()
descriptions <- html %>%
rvest::html_nodes(".js-card-title .js-card-title") %>%
rvest::html_text2()
paths <- html %>%
rvest::html_nodes("[class='property-card__content-link js-card-title']") %>%
rvest::html_attr("href")
prices <- html %>%
rvest::html_nodes(".js-card-title p") %>%
rvest::html_text2() %>%
base::substring(4) %>%
stringr::str_remove_all(" /MÃªs")
resultados <- html %>%
rvest::html_nodes(".js-total-records") %>%
rvest::html_text2() %>%
as.numeric()
paths
first_link <- c(main_link, filters_link) %>%
stack()
main_link <- c('https://www.vivareal.com.br/aluguel/sp/sao-jose-do-rio-preto/condominio_residencial/')
filters_link <- c('#ordenar-por=preco:ASC&preco-ate=3000&preco-desde=1200&quartos=2&tipos=condominio_residencial,casa_residencial')
first_link <- c(main_link, filters_link) %>%
stack()
first_link <- c(main_link, filters_link) %>%
unlist() %>%
stack()
first_link <- stack(c(main_link, filters_link))
first_link <- stack(unlist(c(main_link, filters_link)))
main_link[1]
main_link[0]
first_link <- stack(unlist(c(main_link[1], filters_link[1])))
first_link <- stack(c(main_link[1], filters_link[1]))
first_link <- unlist(c(main_link[1], filters_link[1]))
first_link
first_link <- as.data.frame(c(main_link, filters_link))
View(first_link)
first_link <- as.data.frame(cbind(main_link, filters_link))
View(first_link)
stack(first_link)
first_link[1]
first_link[2]
stack(unlist(first_link))
unlist(first_link)
obj <- unlist(first_link)
obj
obj <- unlist(first_link[1], first_link[2])
obj
# zera td
rm(list = ls())
# carrega pckgs
pacman::p_load('RSelenium', 'plyr', 'dplyr', 'rvest', 'stringr')
# abstracao dos links por partes
base_link <- c('https://www.vivareal.com.br/')
route_params <- c('aluguel/sp/sao-jose-do-rio-preto/condominio_residencial/')
query_params <- c('#ordenar-por=preco:ASC&preco-ate=3000&preco-desde=1200&quartos=2&tipos=condominio_residencial,casa_residencial')
# Iniciar um servidor Selenium e criar instancia de browser
rD <- RSelenium::rsDriver(browser = 'chrome', port = 4545L, chromever = '89.0.4389.23')
remDr <- rD[['client']] # browser
